import{h as C}from"./api-6KZm3PBg.js";import{d as M,P as z,l as w,q as e,t as o,v,H as U,G as p,r as g,a,o as h,z as c,A as d}from"./element-plus-BmLo4b4r.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";const H={class:"admin-settings"},B={class:"page-header"},T={class:"header-actions"},W={class:"content-container"},j={class:"settings-section"},N={class:"settings-content"},P={class:"setting-item"},R={class:"setting-item"},A={class:"setting-item"},I={class:"setting-item"},L={class:"setting-item"},O={class:"setting-item"},E={class:"settings-section"},J={class:"settings-content"},q={class:"setting-item"},F={key:0,class:"setting-item full-width"},G={class:"settings-section"},$={class:"section-header"},K={class:"header-actions"},Q={class:"system-info"},X={class:"info-item"},Y={class:"info-value"},Z={class:"info-item"},ee={class:"info-value"},te={class:"info-item"},se={class:"info-value"},le=M({__name:"AdminSettingsView",setup(oe){const s=g({batchSize:10,priority:5,maxRetries:3,retryStrategy:"linear",retryDelay:30,maxConcurrentTasks:3,enableWebhook:!1,webhookUrl:""}),u=g(!1),i=g({version:"IPS v1.0.0",uptime:"运行中",environment:"Development"}),k=()=>{const n=localStorage.getItem("ips_settings");if(n)try{const t=JSON.parse(n);s.value={...s.value,...t}}catch(t){console.error("Failed to load settings:",t)}},f=async()=>{try{u.value=!0,localStorage.setItem("ips_settings",JSON.stringify(s.value)),await new Promise(n=>setTimeout(n,500)),d.success("设置已保存")}catch{d.error("保存设置失败")}finally{u.value=!1}},x=()=>{s.value={batchSize:10,priority:5,maxRetries:3,retryStrategy:"linear",retryDelay:30,maxConcurrentTasks:3,enableWebhook:!1,webhookUrl:""},d.info("已恢复默认设置")},y=async()=>{try{const n=await C.check();i.value={...i.value,uptime:"运行中",environment:n.includes("Production")?"Production":"Development"},d.success(`系统健康检查通过: ${n}`)}catch{d.error("系统健康检查失败")}};return z(()=>{k(),i.value.uptime="运行中",i.value.environment="Development"}),(n,t)=>{const m=a("el-button"),r=a("el-input-number"),b=a("el-option"),V=a("el-select"),_=a("el-switch"),S=a("el-input");return h(),w("div",H,[e("div",B,[t[10]||(t[10]=e("h1",null,"系统设置",-1)),e("div",T,[o(m,{onClick:x},{default:v(()=>[...t[8]||(t[8]=[e("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M4 4v5h.582m15.356-2A3 3 0 00-4.243 0 9.883L13.415 15l-1.766-2.766a3 3 0 00-4.243-9.883 0 0zm-3.5 9a3.5 3.5 0 000-7 0 3.5 3.5 0 007 0z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),c(" 恢复默认 ",-1)])]),_:1}),o(m,{type:"primary",onClick:f,loading:u.value},{default:v(()=>[...t[9]||(t[9]=[e("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M19 21H5a2 2 0 00-2-2V5a2 2 0 00-2-2h11l-3-3m0 0l3 3m4-4H6m4 4v6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),c(" 保存设置 ",-1)])]),_:1},8,["loading"])])]),e("div",W,[e("div",j,[t[22]||(t[22]=e("div",{class:"section-header"},[e("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M20 7h-9M20 11h-9M20 15h-9M3 7h2v10H3V7zm0 0l2-2M3 17l2 2",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})]),e("h2",null,"任务默认配置")],-1)),e("div",N,[e("div",P,[t[11]||(t[11]=e("div",{class:"setting-label"},[e("div",{class:"label-text"},"批次大小"),e("div",{class:"label-description"},"默认节点批次处理大小")],-1)),o(r,{modelValue:s.value.batchSize,"onUpdate:modelValue":t[0]||(t[0]=l=>s.value.batchSize=l),min:1,max:100},null,8,["modelValue"]),t[12]||(t[12]=e("span",{class:"setting-hint"},"节点: 1-100",-1))]),e("div",R,[t[13]||(t[13]=e("div",{class:"setting-label"},[e("div",{class:"label-text"},"优先级"),e("div",{class:"label-description"},"默认任务优先级")],-1)),o(r,{modelValue:s.value.priority,"onUpdate:modelValue":t[1]||(t[1]=l=>s.value.priority=l),min:1,max:10},null,8,["modelValue"]),t[14]||(t[14]=e("span",{class:"setting-hint"},"范围: 1-10",-1))]),e("div",A,[t[15]||(t[15]=e("div",{class:"setting-label"},[e("div",{class:"label-text"},"最大重试次数"),e("div",{class:"label-description"},"失败时的默认重试上限")],-1)),o(r,{modelValue:s.value.maxRetries,"onUpdate:modelValue":t[2]||(t[2]=l=>s.value.maxRetries=l),min:0,max:5},null,8,["modelValue"]),t[16]||(t[16]=e("span",{class:"setting-hint"},"范围: 0-5",-1))]),e("div",I,[t[17]||(t[17]=e("div",{class:"setting-label"},[e("div",{class:"label-text"},"重试策略"),e("div",{class:"label-description"},"重试时的退避算法")],-1)),o(V,{modelValue:s.value.retryStrategy,"onUpdate:modelValue":t[3]||(t[3]=l=>s.value.retryStrategy=l),style:{width:"100%"}},{default:v(()=>[o(b,{label:"线性",value:"linear"}),o(b,{label:"指数退避",value:"exponential"})]),_:1},8,["modelValue"])]),e("div",L,[t[18]||(t[18]=e("div",{class:"setting-label"},[e("div",{class:"label-text"},"重试延迟(秒)"),e("div",{class:"label-description"},"重试之间的等待时间")],-1)),o(r,{modelValue:s.value.retryDelay,"onUpdate:modelValue":t[4]||(t[4]=l=>s.value.retryDelay=l),min:5,max:300},null,8,["modelValue"]),t[19]||(t[19]=e("span",{class:"setting-hint"},"范围: 5-300秒",-1))]),e("div",O,[t[20]||(t[20]=e("div",{class:"setting-label"},[e("div",{class:"label-text"},"最大并发任务数"),e("div",{class:"label-description"},"同时运行的最大任务数")],-1)),o(r,{modelValue:s.value.maxConcurrentTasks,"onUpdate:modelValue":t[5]||(t[5]=l=>s.value.maxConcurrentTasks=l),min:1,max:10},null,8,["modelValue"]),t[21]||(t[21]=e("span",{class:"setting-hint"},"范围: 1-10",-1))])])]),e("div",E,[t[25]||(t[25]=e("div",{class:"section-header"},[e("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})]),e("h2",null,"通知配置")],-1)),e("div",J,[e("div",q,[t[23]||(t[23]=e("div",{class:"setting-label"},[e("div",{class:"label-text"},"启用Webhook"),e("div",{class:"label-description"},"任务完成时发送通知")],-1)),o(_,{modelValue:s.value.enableWebhook,"onUpdate:modelValue":t[6]||(t[6]=l=>s.value.enableWebhook=l)},null,8,["modelValue"])]),s.value.enableWebhook?(h(),w("div",F,[t[24]||(t[24]=e("div",{class:"setting-label"},[e("div",{class:"label-text"},"Webhook URL"),e("div",{class:"label-description"},"接收POST通知的URL")],-1)),o(S,{modelValue:s.value.webhookUrl,"onUpdate:modelValue":t[7]||(t[7]=l=>s.value.webhookUrl=l),placeholder:"https://your-webhook-endpoint.com/notify",class:"webhook-input"},null,8,["modelValue"])])):U("",!0)])]),e("div",G,[e("div",$,[t[27]||(t[27]=e("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0zM13 8h-1V6h1m1 0h.01M21 8a9 9 0 11-18 0 9 9 0 0118 0zM9 16h.01v5H8v-5H8m0-2h2v7H9zm-2 0h10.01M5 8h14v2H5v-2z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),t[28]||(t[28]=e("h2",null,"系统信息",-1)),e("div",K,[o(m,{onClick:y,size:"small"},{default:v(()=>[...t[26]||(t[26]=[e("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M22 11.08V12a10 10 0 00-10-10h-4.077C22 10.634 12.099 12 13.309 12 15V3.464C12 1.988 10.828 8.977 8 7.857l1.292-1.292a1 1 0 01.414 1.414l8.586 8.586a1 1 0 011.414-1.414 19.536 11.366 21.504 13.309 22 11.308z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),c(" 健康检查 ",-1)])]),_:1})])]),e("div",Q,[e("div",X,[t[29]||(t[29]=e("span",{class:"info-label"},"版本",-1)),e("span",Y,p(i.value.version),1)]),e("div",Z,[t[30]||(t[30]=e("span",{class:"info-label"},"运行时间",-1)),e("span",ee,p(new Date().toLocaleString()),1)]),e("div",te,[t[31]||(t[31]=e("span",{class:"info-label"},"环境",-1)),e("span",se,p(i.value.environment),1)])])])])])}}}),re=D(le,[["__scopeId","data-v-2e0f9382"]]);export{re as default};
