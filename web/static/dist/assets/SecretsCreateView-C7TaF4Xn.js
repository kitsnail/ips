import{u as q}from"./index-DV2cirnV.js";import{b as j}from"./api-6KZm3PBg.js";import{d as F,l as N,q as l,t,v as s,V as T,r as p,a as d,o as $,z as b,A as g}from"./element-plus-BmLo4b4r.js";const z={class:"max-w-[1000px] mx-auto p-6 space-y-8"},E={class:"flex justify-between items-center"},h={class:"flex gap-3"},A={class:"bg-white dark:bg-slate-800 rounded-xl p-8 shadow-sm border border-slate-100 dark:border-slate-700/50 max-w-3xl"},H={class:"mt-8 p-4 bg-slate-50 dark:bg-slate-900/50 rounded-lg border border-slate-100 dark:border-slate-700 text-sm text-slate-600 dark:text-slate-400"},I={class:"flex items-center gap-2 font-medium mb-2 text-slate-800 dark:text-slate-200"},O=F({__name:"SecretsCreateView",setup(L){const x=q(),v=p(!1),r=p({name:"",registry:"",username:"",password:""}),u=p({}),k=p({}),w=()=>{const o={};return r.value.name.trim()||(o.name="请输入认证名称"),r.value.registry.trim()||(o.registry="请输入仓库地址"),r.value.username.trim()||(o.username="请输入用户名"),r.value.password||(o.password="请输入密码"),u.value=o,Object.keys(o).length===0},n=o=>{k.value[o]=!0},_=async()=>{if(n("name"),n("registry"),n("username"),n("password"),!!w())try{v.value=!0,await j.create(r.value),g.success("仓库认证添加成功"),x.push("/secrets")}catch(o){g.error(o.response?.data?.error||"添加认证失败")}finally{v.value=!1}},y=()=>{x.back()};return(o,e)=>{const c=d("el-button"),i=d("el-input"),m=d("el-form-item"),V=d("Link"),f=d("el-icon"),B=d("User"),C=d("el-form"),U=d("InfoFilled");return $(),N("div",z,[l("div",E,[e[10]||(e[10]=l("h1",{class:"text-2xl font-bold text-slate-900 dark:text-slate-100"},"添加仓库认证",-1)),l("div",h,[t(c,{onClick:y},{default:s(()=>[...e[8]||(e[8]=[b("取消",-1)])]),_:1}),t(c,{type:"primary",onClick:_,loading:v.value},{default:s(()=>[...e[9]||(e[9]=[b(" 保存认证 ",-1)])]),_:1},8,["loading"])])]),l("div",A,[e[14]||(e[14]=T('<div class="flex items-center gap-3 mb-8 pb-4 border-b border-slate-100 dark:border-slate-700"><div class="w-10 h-10 rounded-lg bg-cyan-50 dark:bg-cyan-900/20 flex items-center justify-center text-cyan-600 dark:text-cyan-400"><svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg></div><div><h3 class="text-lg font-semibold text-slate-900 dark:text-white">认证详情</h3><p class="text-sm text-slate-500 dark:text-slate-400">配置私有镜像仓库的访问凭证</p></div></div>',1)),t(C,{"label-position":"top",class:"max-w-xl"},{default:s(()=>[t(m,{label:"认证名称",required:"",error:u.value.name},{default:s(()=>[t(i,{modelValue:r.value.name,"onUpdate:modelValue":e[0]||(e[0]=a=>r.value.name=a),placeholder:"例如：Harbor Production",onBlur:e[1]||(e[1]=a=>n("name")),class:"!w-full"},null,8,["modelValue"]),e[11]||(e[11]=l("div",{class:"text-xs text-slate-400 mt-1"},"用于识别该认证信息的唯一名称",-1))]),_:1},8,["error"]),t(m,{label:"仓库地址",required:"",error:u.value.registry},{default:s(()=>[t(i,{modelValue:r.value.registry,"onUpdate:modelValue":e[2]||(e[2]=a=>r.value.registry=a),placeholder:"例如：harbor.example.com",onBlur:e[3]||(e[3]=a=>n("registry"))},{prefix:s(()=>[t(f,{class:"text-slate-400"},{default:s(()=>[t(V)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["error"]),t(m,{label:"用户名",required:"",error:u.value.username},{default:s(()=>[t(i,{modelValue:r.value.username,"onUpdate:modelValue":e[4]||(e[4]=a=>r.value.username=a),placeholder:"仓库访问用户名",onBlur:e[5]||(e[5]=a=>n("username"))},{prefix:s(()=>[t(f,{class:"text-slate-400"},{default:s(()=>[t(B)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["error"]),t(m,{label:"密码 / Token",required:"",error:u.value.password},{default:s(()=>[t(i,{modelValue:r.value.password,"onUpdate:modelValue":e[6]||(e[6]=a=>r.value.password=a),type:"password","show-password":"",placeholder:"请输入密码或访问令牌",onBlur:e[7]||(e[7]=a=>n("password"))},null,8,["modelValue"])]),_:1},8,["error"])]),_:1}),l("div",H,[l("div",I,[t(f,null,{default:s(()=>[t(U)]),_:1}),e[12]||(e[12]=l("span",null,"安全提示",-1))]),e[13]||(e[13]=l("ul",{class:"list-disc pl-5 space-y-1"},[l("li",null,"您的密码将以加密方式存储。"),l("li",null,"建议使用具有最小权限的 Robot 账号或访问令牌。"),l("li",null,"该认证信息将用于拉取私有镜像。")],-1))])])])}}});export{O as default};
